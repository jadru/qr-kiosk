generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Item_Order {
  id           Int       @id @default(autoincrement())
  count        Int
  menu_item    Menu_Item @relation(fields: [menu_item_id], references: [id])
  menu_item_id Int
}

model Owner {
  id                   Int            @id @default(autoincrement())
  username             String         @unique
  password             String
  email                String         @unique
  phone                String         @unique
  store_name           String
  store_address        String
  store_phone          String
  theme                String?
  store_operating_time String?
  menu                 Menu?
  name                 String?
  photo                String[]
  facility             String?
  createdTime          DateTime       @default(now())
  updatedTime          DateTime       @updatedAt
  Order_Detail         Order_Detail[]
}

model Order_Detail {
  id           String    @id
  table_number Int
  order_name   String
  toss_status  String?
  order_status String?
  total_amount Int
  approveAt    DateTime?
  requestAt    DateTime?
  owner        Owner     @relation(fields: [owner_id], references: [id])
  owner_id     Int
  user         User      @relation(fields: [user_id], references: [id])
  user_id      String    @db.Uuid
}

model Menu_Item {
  id          Int          @id @default(autoincrement())
  image_url   String?
  price       Int
  name        String
  menu        Menu         @relation(fields: [menu_id], references: [id])
  menu_id     Int
  createdTime DateTime     @default(now())
  updatedTime DateTime     @updatedAt
  Item_Order  Item_Order[]
}

model Menu {
  id            Int         @id @default(autoincrement())
  category_name String      @unique
  menu_items    Menu_Item[]
  owner         Owner       @relation(fields: [id], references: [id])
  owner_id      Int
  createdTime   DateTime    @default(now())
  updatedTime   DateTime    @updatedAt
}

model User {
  id           String         @id @default(uuid()) @db.Uuid
  createdTime  DateTime       @default(now())
  Order_Detail Order_Detail[]
}
